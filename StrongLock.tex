\subsection{Алгоритм обязательной блокировки}

\begin{lstlisting}[language=csh,caption={Алгоритм Cassandra.GetLock(lockId, threadId)}]
  1.  |Добавить поток в очередь|
  2.  |Если наш поток - первый в очереди:|
  3.  	|Добавить ячейку в основную таблицу|
  4.  	|Если в основной таблице есть только одна запись:|
  5.  		|Закончить|
  6.  	|Иначе:|
  7.  		|Удалить ячейку из основной таблицы|
  8.  		|Перейти к шагу 2|
  9.  |Иначе:|
 10.  	|Перейти к шагу 2|

\end{lstlisting}